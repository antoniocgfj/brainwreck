<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="/static/showsstyles.css">
    <title>Brainwreck</title>
</head>
<body>
<h2>See who attended our previous shows!</h2>
<!--Add the database interaction and display for the shows attended table-->
<nav class="nav">
    <div>
        <a href="/" id="logo">Brainwreck</a>
    </div>
    <div class="nav-right">
        <ul>
            <li>
                <a href="contactUs">Contact Us</a>
            </li>
            <li>
                <a href="pictures">Pictures</a>
            </li>
            <li>
                <a href="funFacts">Band Member Fun Facts</a>
            </li>
            <li>
                <a href="aboutUs">About Us</a>
            </li>
            <li>
                <a href="shows">Previous Shows</a>
            </li>
            <li>
                <a href="tour">Current Tour</a>
            </li>
            <li>
                <a href="mailList">Mailing List</a>
            </li>
            <li>
                <a href="fans">Fans</a>
            </li>
        </ul>
    </div>
</nav>
<div id="fullpage">
    <div>
        <div id="main">
            <h1>Previous Shows</h1>
            {{#if shows}}
                <table class="tableContainer">
                    <thead>
                        <tr>
                        <form name="search" id="search" method="POST" action="/shows">
                            <td rowspan="3">
                                User: <select name="fan" id="fan">
                                <option value = ""> --Please choose a fan-- </option>
                                {{#each fans}}
                                    <option value={{this.id}}>{{this.name}}</option>
                                {{/each}}
                            </select>
                            </td>
                            <td>
                                <input type="submit" value="submit">
                            </td>
                        </form>
                        <form name="search" id="search" method="POST" action="/shows">
                            <td colspan = "4">OR</td>
                            <td rowspan="3">
                                Show: <select name="show" id="show">
                                <option value = ""> --Please choose a show-- </option>
                                {{#each shows}}
                                    <option value="{{this.showID}}">{{this.venue}} on {{this.calendar}}</option>
                                {{/each}}
                                </select>
                            </td>
                            <td>
                                <input type="submit" value="submit">
                            </td>
                        </form>
                        </tr>
                    </thead>
                </table>
            {{/if}}
            <table class="tableContainer">
                {{#if fanResults}}
                    <thead>
                        <tr>
                            <td>First Name</td>
                            <td>Last Name</td>
                            <td>Concert</td>
                            <td><a href="/shows"><input type="button" value="Go Back"></a></td>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each fanResults}}
                            <tr>
                            <td>{{this.firstName}}</td>
                            <td>{{this.lastName}}</td>
                            <td>{{this.venue}}</td>
                            </tr>
                        {{/each}}
                    </tbody>
                {{else if showResults}}
                    <thead>
                        <tr>
                            <td>First Name</td>
                            <td>Last Name</td>
                            <td>Concert</td>
                            <td><a href="/shows"><input type="button" value="Go Back"></a></td>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each showResults}}
                            <tr>
                                <td>{{this.firstName}}</td>
                                <td>{{this.lastName}}</td>
                                <td>{{this.venue}}</td>
                            </tr>
                        {{/each}}
                    </tbody>
                {{/if}}        
                {{#unless shows}}
                    {{#unless fanResults}}
                        {{#unless showResults}}
                        <thead>
                            <tr>
                                <td>No Results Found</td>
                                <td><a href="/shows"><input type="button" value="Go Back"></a></td>
                            </tr>
                        </thead>
                        {{/unless}}
                    {{/unless}} 
                {{/unless}}
            </table>
        </div>
    </div>
    <footer class="footer mt-auto py-3">
        <div class = "container">
            <span class="text-muted">
                <a href="https://www.facebook.com" target="_blank"><img src="/static/facebook.png" alt="facebook"
                                                                        class="footerLogos"></a>
            <a href="https://www.instagram.com" target="_blank"><img src="/static/instagram.png" alt="instagram" class="footerLogos"></a>
            <a href="https://www.twitter.com" target="_blank"><img src="/static/twitter.png" alt="twitter" class="footerLogos"></a>
            Icons made by <a href="https://www.flaticon.com/authors/freepik" target="_blank" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" target="_blank" title="Flaticon">www.flaticon.com</a> / Images by <a href="https://www.unsplash.com" target="_blank">Unsplash</a>

            </span>
        </div>
    </footer>

    <script src="/static/script.js"></script>
</div>
</body>
</html>